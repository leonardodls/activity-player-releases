{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/libs-base-activity-player/src/EventManager/event-args.ts","webpack:///./node_modules/libs-base-activity-player/src/EventManager/event.enum.ts","webpack:///./node_modules/libs-base-activity-player/src/base-activity-player.ts","webpack:///./node_modules/libs-base-activity-player/src/item-app.ts","webpack:///./node_modules/preact/dist/preact.umd.js","webpack:///./src/components/activity-player/meta/button.config.ts","webpack:///./src/components/activity-player/single-item-activity-player.tsx","webpack:///./src/components/activity-player/singleItemActivityPlayer.component.tsx","webpack:///./src/components/activity-player/styles/style.less?2dc9","webpack:///./src/components/button-bar/button-bar.component.tsx","webpack:///./src/components/button-bar/button.component.tsx","webpack:///./src/components/button-bar/button.enums.ts","webpack:///./src/components/button-bar/styles/style.less?0945","webpack:///./src/components/item-player/itemPlayer.component.tsx","webpack:///./src/style/index.less?9070"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","EventArgs","args","launchId","type","SubmitEventArgs","_super","_this","call","itemId","response","ReadyEventArgs","playerInstance","ErrorEventArgs","error","exception","EVENTS","READY","ERROR","CHECK_ANSWER","RETRY","RESET","SUBMIT","HINT_CONSUMED","DESTROY","item_app_1","require","event_enum_1","event_args_1","BaseActivityPlayer","items","initializedItems","eventMgr","LeonardoApp","EventEmitter","init","args1","args2","options","container","HTMLElement","events","event_1","subscribe","itemInitPromiseArr","self_1","_loop_1","idx","this_1","ItemApp","uiStyles","playerConfig","itemInitPromise","uiStyle","push","then","length","Promise","all","values","ready","eventArgs","emit","errorHandler","destroy","currentItem","itemsAPI","attemptsAPI","destroyEventArgs","renderItem","index","self","resolve","reject","render","inv_1","setInterval","clearInterval","eventName","eventHandler","on","unsubscribe","off","displayHints","getCurrentItem","showHints","getItemCount","getItems","getItem","save","callback","submit","retry","getResponses","errorEventArgs","_initComplete","item","Services","get","fetchItemJSON","itemJSON","itemType","getItemType","loadItemPlayer","Player","itemPlayer","dimensions","includes","height","split","options_1","config","callbacks","playerButtons","visible","self_2","addWidget","initItem","self_3","moduleLoader","ModuleLoader","loadModule","score","displayFeedback","id","scoringId","leonardoId","maxScore","scoredJson","gotScore","isSubmit","getResponse","clearFeedback","reset","hideHints","hasHints","remainingHints","focalise","hide","show","button_enums_1","checkMyWorkBtn","ButtonBarIcons","checkMyWork","tooltip","className","text","icon","iconCls_left","tryAgain","hintsBtn","showHint","closeHint","iconCls_right","resetBtn","base_activity_player_1","preact_1","singleItemActivityPlayer_component_1","SingleItemActivityPlayer","Error","h","SingleItemActivityComponent","renderItemFuncProp","bind","default","itemPlayer_component_1","button_config_1","button_bar_component_1","props","defaultButtonsArray","concat","hiddenButtons","state","_item","activityContainerCls","playerBtns","buttons","isButtonBarVisible","undefined","class","style","getUiStyles","ItemPlayerComponent","setState","ButtonBarComponent","styles","activityPlayerStyles","allowedUiStyle","parsedStyles","property","indexOf","Component","button_component_1","createButtonJSX","buttonConfig","ButtonComponent","leftIcon","rightIcon","label","onButtonClick","onClick","createButtons","isTryAgainEnabled","removeHiddenButtons","map","event","iconId","currentTarget","getAttribute","buttonType","filter","btn","apply","arguments","title","e","componentDidMount","renderPromsise","base","itemAppInstance","display","classList","remove","setTimeout","itemPlayerContainerCls"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,IAAI;AACJ;;AAEA;AACA,mCAAmC,0DAA0D;AAC7F;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,8CAA8C;AAC9C;AACA;;AAEA;;AAEA;AACA,4CAA4C;AAC5C;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,4CAA4C;AAC5C,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;;AAEA;AACA,uFAAuF;AACvF,IAAI;AACJ,2FAA2F;AAC3F;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C,KAAK;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,WAAW;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;;AAEF;AACA,+BAA+B;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,cAAc;;AAE7D,CAAC;AACD;;;;;;;;;;;;;AC9uBa;;AACb7D,MAAM,CAACU,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,OAAK,EAAE;AAAT,CAA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","file":"singleItemActivityPlayer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar EventArgs = /** @class */ (function () {\r\n    function EventArgs(args) {\r\n        this.launchId = args.launchId;\r\n        this.type = args.type;\r\n    }\r\n    return EventArgs;\r\n}());\r\nexports.EventArgs = EventArgs;\r\nvar SubmitEventArgs = /** @class */ (function (_super) {\r\n    __extends(SubmitEventArgs, _super);\r\n    function SubmitEventArgs(args) {\r\n        var _this = _super.call(this, args) || this;\r\n        _this.itemId = args.itemId;\r\n        _this.response = args.response;\r\n        return _this;\r\n    }\r\n    return SubmitEventArgs;\r\n}(EventArgs));\r\nexports.SubmitEventArgs = SubmitEventArgs;\r\nvar ReadyEventArgs = /** @class */ (function (_super) {\r\n    __extends(ReadyEventArgs, _super);\r\n    function ReadyEventArgs(args) {\r\n        var _this = _super.call(this, args) || this;\r\n        _this.playerInstance = args.playerInstance;\r\n        return _this;\r\n    }\r\n    return ReadyEventArgs;\r\n}(EventArgs));\r\nexports.ReadyEventArgs = ReadyEventArgs;\r\nvar ErrorEventArgs = /** @class */ (function (_super) {\r\n    __extends(ErrorEventArgs, _super);\r\n    function ErrorEventArgs(args) {\r\n        var _this = _super.call(this, args) || this;\r\n        _this.error = args.exception;\r\n        return _this;\r\n    }\r\n    return ErrorEventArgs;\r\n}(EventArgs));\r\nexports.ErrorEventArgs = ErrorEventArgs;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EVENTS = {\r\n    READY: \"ready\",\r\n    ERROR: \"error\",\r\n    CHECK_ANSWER: \"checkAnswer\",\r\n    RETRY: \"retry\",\r\n    RESET: \"reset\",\r\n    SUBMIT: \"submit\",\r\n    HINT_CONSUMED: \"hintConsumed\",\r\n    DESTROY: \"destroy\"\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar item_app_1 = require(\"./item-app\");\r\nvar event_enum_1 = require(\"./EventManager/event.enum\");\r\nvar event_args_1 = require(\"./EventManager/event-args\");\r\nvar BaseActivityPlayer = /** @class */ (function () {\r\n    function BaseActivityPlayer() {\r\n        this.items = [];\r\n        // var to hold items whose init is complete\r\n        this.initializedItems = [];\r\n        // Assigning Global Event Manager Object to a variable so that it can be accessed locally.\r\n        this.eventMgr = new LeonardoApp.EventEmitter;\r\n    }\r\n    /**\r\n     *\r\n     * allowed init params are ( launchId, items [, container] [, options] )\r\n     * container and options are optional params\r\n     * @param launchId\r\n     * @param items\r\n     * @param args1\r\n     * @param args2\r\n     * options: http://jsoneditoronline.org/?id=041bd0acb8ff4fa49dbe0c2c45bb0d78\r\n     */\r\n    BaseActivityPlayer.prototype.init = function (launchId, items, args1, args2) {\r\n        var options = null;\r\n        this.launchId = launchId;\r\n        if (args2) {\r\n            this.container = args1;\r\n            options = args2;\r\n        }\r\n        else {\r\n            if (args1 instanceof HTMLElement) {\r\n                this.container = args1;\r\n            }\r\n            else {\r\n                options = args1;\r\n            }\r\n        }\r\n        // Subscribing to events handler provided by the Consumer App.\r\n        if (options && options.events) {\r\n            for (var event_1 in options.events) {\r\n                this.subscribe(event_1, options.events[event_1]);\r\n            }\r\n        }\r\n        try {\r\n            var itemInitPromiseArr = [];\r\n            var self_1 = this;\r\n            var _loop_1 = function (idx) {\r\n                this_1.items[idx] = new item_app_1.ItemApp();\r\n                var events = options && options.events ? options.events : null;\r\n                var uiStyles = options && options.playerConfig && options.playerConfig.uiStyles ? options.playerConfig.uiStyles : null;\r\n                var itemInitPromise = this_1.items[idx].init(items[idx], launchId, { events: events, uiStyle: uiStyles, eventMgr: self_1.eventMgr });\r\n                itemInitPromiseArr.push(itemInitPromise);\r\n                itemInitPromise.then(function () {\r\n                    self_1.initializedItems[idx] = self_1.items[idx];\r\n                });\r\n            };\r\n            var this_1 = this;\r\n            // todo: fill this.items using items attr\r\n            // init one itemApp for each item\r\n            for (var idx = 0; idx < items.length; idx++) {\r\n                _loop_1(idx);\r\n            }\r\n            Promise.all(itemInitPromiseArr).then(function (values) {\r\n                // trigger ready event\r\n                if (options && options.events && options.events.ready) {\r\n                    var eventArgs = {\r\n                        launchId: launchId,\r\n                        type: event_enum_1.EVENTS.READY,\r\n                        playerInstance: self_1\r\n                    };\r\n                    self_1.eventMgr.emit(event_enum_1.EVENTS.READY, new event_args_1.ReadyEventArgs(eventArgs));\r\n                }\r\n            });\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(launchId, exception);\r\n        }\r\n    };\r\n    ;\r\n    BaseActivityPlayer.prototype.destroy = function () {\r\n        this.currentItem.destroy();\r\n        this.currentItem = null;\r\n        this.initializedItems = [];\r\n        this.items = [];\r\n        this.itemsAPI = null;\r\n        this.attemptsAPI = null;\r\n        var destroyEventArgs = {\r\n            launchId: this.launchId,\r\n            type: event_enum_1.EVENTS.DESTROY\r\n        };\r\n        this.eventMgr.emit(event_enum_1.EVENTS.DESTROY, new event_args_1.EventArgs(destroyEventArgs));\r\n    };\r\n    ;\r\n    BaseActivityPlayer.prototype.renderItem = function (index, container) {\r\n        var self = this;\r\n        return new Promise(function (resolve, reject) {\r\n            if (self.initializedItems[index]) {\r\n                // calls render function of itemApp instance belonging to the item to be rendererd\r\n                self.items[index].render(container)\r\n                    .then(function () {\r\n                    // sending itemApp instance to the Activity Player\r\n                    resolve(self.items[index]);\r\n                });\r\n            }\r\n            else {\r\n                // keep polling untill this.initializedItems[index] becomes available\r\n                var inv_1 = setInterval(function () {\r\n                    if (self.initializedItems[index]) {\r\n                        clearInterval(inv_1);\r\n                        self.currentItem = self.items[index];\r\n                        self.items[index].render(container)\r\n                            .then(function () {\r\n                            // sending itemApp instance to the Activity Player\r\n                            resolve(self.items[index]);\r\n                        });\r\n                    }\r\n                }, 50);\r\n            }\r\n        });\r\n    };\r\n    ;\r\n    BaseActivityPlayer.prototype.subscribe = function (eventName, eventHandler) {\r\n        // Register an event handler fn.\r\n        this.eventMgr.on(eventName, eventHandler);\r\n    };\r\n    BaseActivityPlayer.prototype.unsubscribe = function (eventName, eventHandler) {\r\n        // Remove an event listener.\r\n        this.eventMgr.off(eventName, eventHandler);\r\n    };\r\n    BaseActivityPlayer.prototype.displayHints = function () {\r\n        return this.getCurrentItem().showHints();\r\n    };\r\n    BaseActivityPlayer.prototype.getItemCount = function () {\r\n        return this.items.length;\r\n    };\r\n    BaseActivityPlayer.prototype.getItems = function () {\r\n        // returns array of itemApp instances\r\n        return this.items;\r\n    };\r\n    BaseActivityPlayer.prototype.getCurrentItem = function () {\r\n        // return currentItem;\r\n        return this.currentItem;\r\n    };\r\n    BaseActivityPlayer.prototype.getItem = function (itemId) {\r\n        // returns the item object for given itenmId\r\n        // Returns Item Object\r\n        return this.items[itemId];\r\n    };\r\n    BaseActivityPlayer.prototype.save = function (callback) {\r\n        // todo: saves user response to the Attempts Service\r\n        // loop on _itmes        \r\n        // call _item.save();\r\n        // end loop\r\n    };\r\n    BaseActivityPlayer.prototype.submit = function (callback, options) {\r\n        this.getCurrentItem().submit(callback, options);\r\n        // options = {\tconsumeAttempt: true | false }\r\n        // loop on _itmes        \r\n        // call _item.submit( options );\r\n        // end loop\r\n    };\r\n    BaseActivityPlayer.prototype.retry = function (callback) {\r\n        this.getCurrentItem().retry(callback);\r\n        // launch new attempt\r\n    };\r\n    BaseActivityPlayer.prototype.getResponses = function () {\r\n        // todo: Obtains an object containing responses for each Item.\r\n        // Returns Object\r\n        return {\r\n            \"launchId\": \"<launchId>\",\r\n            \"items\": [\r\n                {\r\n                    \"itemId\": \"<itemId>\",\r\n                    \"responseId\": \"<ResponseId>\",\r\n                    \"maxScore\": \"<item-max-score>\",\r\n                    \"gotScore\": \"<got-score>\",\r\n                    \"status\": \"NotAttempted | InProgress | Submitted\"\r\n                }\r\n            ]\r\n        };\r\n    };\r\n    // Error Handler to emit all error events from single point.\r\n    BaseActivityPlayer.prototype.errorHandler = function (launchId, exception) {\r\n        var errorEventArgs = {\r\n            launchId: launchId,\r\n            type: event_enum_1.EVENTS.ERROR,\r\n            exception: exception\r\n        };\r\n        this.eventMgr.emit(event_enum_1.EVENTS.ERROR, new event_args_1.ErrorEventArgs(errorEventArgs));\r\n    };\r\n    return BaseActivityPlayer;\r\n}());\r\nexports.BaseActivityPlayer = BaseActivityPlayer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar event_args_1 = require(\"./EventManager/event-args\");\r\nvar event_enum_1 = require(\"./EventManager/event.enum\");\r\nvar ItemApp = /** @class */ (function () {\r\n    function ItemApp() {\r\n        // init is an asynchronous process\r\n        // this flag helps itemApp determine whether init is complete or in progress\r\n        this._initComplete = false;\r\n    }\r\n    ItemApp.prototype.init = function (item, launchId, options) {\r\n        this.launchId = launchId;\r\n        this.options = options;\r\n        this.itemsAPI = LeonardoApp.Services.get(\"items\");\r\n        this.attemptsAPI = LeonardoApp.Services.get(\"attempts\");\r\n        if (options && options.eventMgr) {\r\n            this.eventMgr = options.eventMgr;\r\n        }\r\n        try {\r\n            var self_1 = this;\r\n            return new Promise(function (resolve, reject) {\r\n                self_1.fetchItemJSON(item)\r\n                    .then(function (item) {\r\n                    self_1.itemJSON = item;\r\n                    // loads the respective item renderer\r\n                    var itemType = self_1.getItemType(item);\r\n                    return self_1.loadItemPlayer(itemType);\r\n                })\r\n                    .then(function (Player) {\r\n                    if (Player.init) {\r\n                        self_1.itemPlayer = Player.init();\r\n                    }\r\n                    else {\r\n                        self_1.itemPlayer = Player;\r\n                    }\r\n                    self_1._initComplete = true;\r\n                    resolve();\r\n                });\r\n            });\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.render = function (container) {\r\n        var _this = this;\r\n        try {\r\n            if (this.options && this.options.uiStyle) {\r\n                if (this.options.uiStyle.dimensions && this.options.uiStyle.dimensions.includes('content')) {\r\n                    this.options.uiStyle.height = \"expand\";\r\n                }\r\n                else {\r\n                    this.options.uiStyle.dimensions = this.options.uiStyle.dimensions && (this.options.uiStyle.dimensions.split('-')[0] + \"-space\");\r\n                }\r\n            }\r\n            var options_1 = {\r\n                config: this.itemJSON,\r\n                events: this.options.callbacks,\r\n                uiStyle: this.options.uiStyle,\r\n                playerButtons: { visible: false }\r\n            };\r\n            options_1.uiStyle[\"widgetStyles\"] = {\r\n                \"box-shadow\": \"none\",\r\n                \"border\": \"none\"\r\n            };\r\n            var self_2 = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (_this._initComplete) {\r\n                    // render the item in container and call the callback when rendering is done\r\n                    if (self_2.itemPlayer.addWidget) {\r\n                        self_2.itemPlayer = self_2.itemPlayer.addWidget(\"WB2\", container, options_1);\r\n                    }\r\n                    else {\r\n                        self_2.itemPlayer = new self_2.itemPlayer();\r\n                        options_1.itemJSON = options_1.config;\r\n                        self_2.itemPlayer.initItem(\"WB2\", container, options_1);\r\n                    }\r\n                    resolve();\r\n                }\r\n                else {\r\n                    // waits for init (loading of item JSON and Player) of item to complete\r\n                    var inv_1 = setInterval(function () {\r\n                        if (self_2._initComplete) {\r\n                            clearInterval(inv_1);\r\n                            if (self_2.itemPlayer.addWidget) {\r\n                                self_2.itemPlayer = self_2.itemPlayer.addWidget(\"WB2\", container, options_1);\r\n                            }\r\n                            else {\r\n                                self_2.itemPlayer = new self_2.itemPlayer();\r\n                                options_1.itemJSON = options_1.config;\r\n                                self_2.itemPlayer.initItem(\"WB2\", container, options_1);\r\n                            }\r\n                            // render the item in container and call the callback when rendering is done\r\n                            resolve();\r\n                        }\r\n                    }, 50);\r\n                }\r\n            });\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.fetchItemJSON = function (item) {\r\n        try {\r\n            var self_3 = this;\r\n            return new Promise(function (resolve, reject) {\r\n                if (typeof item == \"object\") {\r\n                    resolve(item);\r\n                }\r\n                else if (typeof item == \"string\") {\r\n                    // uses this.itemsAPI to fetch item JSON\r\n                    self_3.itemsAPI\r\n                        .getItem(item)\r\n                        .then(function (item) { return resolve(item); });\r\n                }\r\n            });\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.getItemType = function (itemJSON) {\r\n        return itemJSON.type;\r\n    };\r\n    ItemApp.prototype.loadItemPlayer = function (type) {\r\n        var moduleLoader = LeonardoApp.ModuleLoader;\r\n        return new Promise(function (resolve, reject) {\r\n            moduleLoader &&\r\n                moduleLoader.loadModule(type)\r\n                    .then(function (Player) { return resolve(Player); });\r\n        });\r\n    };\r\n    ItemApp.prototype.save = function (callback) {\r\n        // todo: saves user response to the Attempts Service\r\n    };\r\n    ItemApp.prototype.submit = function (callback, options) {\r\n        try {\r\n            var score = this.itemPlayer.score();\r\n            this.itemPlayer.displayFeedback(score);\r\n            // response object required by Submit/CheckMyWork Event Handler.\r\n            var response = {\r\n                id: score.scoringId,\r\n                launchId: this.launchId,\r\n                score: [\r\n                    {\r\n                        itemId: this.itemJSON.leonardoId,\r\n                        maxScore: score.scoredJson.score,\r\n                        gotScore: score.scoredJson.gotScore\r\n                    }\r\n                ]\r\n            };\r\n            if (callback) {\r\n                callback(response);\r\n            }\r\n            else {\r\n                var eventArgs = {\r\n                    launchId: this.launchId,\r\n                    type: event_enum_1.EVENTS.CHECK_ANSWER,\r\n                    itemId: this.itemJSON.leonardoId,\r\n                    response: response\r\n                };\r\n                // TODO: options.isSubmit is a assumed key which is used to check whether submit button is clicked or check my work is clicked.\r\n                this.eventMgr.emit(options.isSubmit == true ? event_enum_1.EVENTS.SUBMIT : event_enum_1.EVENTS.CHECK_ANSWER, new event_args_1.SubmitEventArgs(eventArgs));\r\n            }\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.getResponse = function () {\r\n        // todo: Obtains an object containing response for this Item.\r\n        // Returns Object\r\n        return {\r\n            \"launchId\": \"<launchId>\",\r\n            \"items\": {\r\n                \"itemId\": \"<itemId>\",\r\n                \"responseId\": \"<ResponseId>\",\r\n                \"maxScore\": \"<item-max-score>\",\r\n                \"gotScore\": \"<got-score>\",\r\n                \"status\": \"NotAttempted | InProgress | Submitted\"\r\n            }\r\n        };\r\n    };\r\n    ItemApp.prototype.getResponses = function () {\r\n        // todo: Obtains an object containing response for this Item.\r\n        // Returns Object\r\n        return {\r\n            \"launchId\": \"<launchId>\",\r\n            \"items\": [{\r\n                    \"itemId\": \"<itemId>\",\r\n                    \"responseId\": \"<ResponseId>\",\r\n                    \"maxScore\": \"<item-max-score>\",\r\n                    \"gotScore\": \"<got-score>\",\r\n                    \"status\": \"NotAttempted | InProgress | Submitted\"\r\n                }]\r\n        };\r\n    };\r\n    ItemApp.prototype.retry = function (callback) {\r\n        try {\r\n            // launch new attempt\r\n            this.itemPlayer.clearFeedback();\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            else {\r\n                var eventArgs = {\r\n                    launchId: this.launchId,\r\n                    type: event_enum_1.EVENTS.RETRY\r\n                };\r\n                this.eventMgr.emit(event_enum_1.EVENTS.RETRY, new event_args_1.EventArgs(eventArgs));\r\n            }\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.reset = function () {\r\n        try {\r\n            this.itemPlayer.reset();\r\n            var eventArgs = {\r\n                launchId: this.launchId,\r\n                type: event_enum_1.EVENTS.RESET\r\n            };\r\n            this.eventMgr.emit(event_enum_1.EVENTS.RESET, new event_args_1.EventArgs(eventArgs));\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.showHints = function () {\r\n        // display hints for the current item\r\n        // returns remaining hints count\r\n        this.itemPlayer.displayHints();\r\n        return -1;\r\n    };\r\n    ItemApp.prototype.hideHints = function () {\r\n        // hide hints from the current item\r\n    };\r\n    ItemApp.prototype.hasHints = function () {\r\n        // returns if the current item has hints\r\n        return true;\r\n    };\r\n    ItemApp.prototype.remainingHints = function () {\r\n        // returns the count of remaining hints\r\n        return 1;\r\n    };\r\n    ItemApp.prototype.subscribe = function (eventName, eventHandler) { };\r\n    ItemApp.prototype.unsubscribe = function (eventName, eventHandler) { };\r\n    ItemApp.prototype.destroy = function () {\r\n        try {\r\n            this.itemPlayer.destroy();\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n        // TODO - destroy it's own private variables.\r\n    };\r\n    ItemApp.prototype.focalise = function () {\r\n        try {\r\n            this.itemPlayer.focalise();\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    ItemApp.prototype.hide = function () { };\r\n    ItemApp.prototype.show = function () { };\r\n    // Error Handler to emit all error events from single point.\r\n    ItemApp.prototype.errorHandler = function (launchId, exception) {\r\n        var errorEventArgs = {\r\n            launchId: launchId,\r\n            type: event_enum_1.EVENTS.ERROR,\r\n            exception: exception\r\n        };\r\n        this.eventMgr.emit(event_enum_1.EVENTS.ERROR, new event_args_1.ErrorEventArgs(errorEventArgs));\r\n    };\r\n    return ItemApp;\r\n}());\r\nexports.ItemApp = ItemApp;\r\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.preact = {})));\n}(this, (function (exports) { 'use strict';\n\n\tvar VNode = function VNode() {};\n\n\tvar options = {};\n\n\tvar stack = [];\n\n\tvar EMPTY_CHILDREN = [];\n\n\tfunction h(nodeName, attributes) {\n\t\tvar children = EMPTY_CHILDREN,\n\t\t    lastSimple = void 0,\n\t\t    child = void 0,\n\t\t    simple = void 0,\n\t\t    i = void 0;\n\t\tfor (i = arguments.length; i-- > 2;) {\n\t\t\tstack.push(arguments[i]);\n\t\t}\n\t\tif (attributes && attributes.children != null) {\n\t\t\tif (!stack.length) stack.push(attributes.children);\n\t\t\tdelete attributes.children;\n\t\t}\n\t\twhile (stack.length) {\n\t\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\t\tfor (i = child.length; i--;) {\n\t\t\t\t\tstack.push(child[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\t\tif (simple = typeof nodeName !== 'function') {\n\t\t\t\t\tif (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;\n\t\t\t\t}\n\n\t\t\t\tif (simple && lastSimple) {\n\t\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\t\tchildren = [child];\n\t\t\t\t} else {\n\t\t\t\t\tchildren.push(child);\n\t\t\t\t}\n\n\t\t\t\tlastSimple = simple;\n\t\t\t}\n\t\t}\n\n\t\tvar p = new VNode();\n\t\tp.nodeName = nodeName;\n\t\tp.children = children;\n\t\tp.attributes = attributes == null ? undefined : attributes;\n\t\tp.key = attributes == null ? undefined : attributes.key;\n\n\t\tif (options.vnode !== undefined) options.vnode(p);\n\n\t\treturn p;\n\t}\n\n\tfunction extend(obj, props) {\n\t  for (var i in props) {\n\t    obj[i] = props[i];\n\t  }return obj;\n\t}\n\n\tfunction applyRef(ref, value) {\n\t  if (ref) {\n\t    if (typeof ref == 'function') ref(value);else ref.current = value;\n\t  }\n\t}\n\n\tvar defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\n\tfunction cloneElement(vnode, props) {\n\t  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n\t}\n\n\tvar NO_RENDER = 0;\n\n\tvar SYNC_RENDER = 1;\n\n\tvar FORCE_RENDER = 2;\n\n\tvar ASYNC_RENDER = 3;\n\n\tvar ATTR_KEY = '__preactattr_';\n\n\tvar IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n\tvar items = [];\n\n\tfunction enqueueRender(component) {\n\t\tif (!component._dirty && (component._dirty = true) && items.push(component) == 1) {\n\t\t\t(options.debounceRendering || defer)(rerender);\n\t\t}\n\t}\n\n\tfunction rerender() {\n\t\tvar p = void 0;\n\t\twhile (p = items.pop()) {\n\t\t\tif (p._dirty) renderComponent(p);\n\t\t}\n\t}\n\n\tfunction isSameNodeType(node, vnode, hydrating) {\n\t\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\t\t\treturn node.splitText !== undefined;\n\t\t}\n\t\tif (typeof vnode.nodeName === 'string') {\n\t\t\treturn !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n\t\t}\n\t\treturn hydrating || node._componentConstructor === vnode.nodeName;\n\t}\n\n\tfunction isNamedNode(node, nodeName) {\n\t\treturn node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n\t}\n\n\tfunction getNodeProps(vnode) {\n\t\tvar props = extend({}, vnode.attributes);\n\t\tprops.children = vnode.children;\n\n\t\tvar defaultProps = vnode.nodeName.defaultProps;\n\t\tif (defaultProps !== undefined) {\n\t\t\tfor (var i in defaultProps) {\n\t\t\t\tif (props[i] === undefined) {\n\t\t\t\t\tprops[i] = defaultProps[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn props;\n\t}\n\n\tfunction createNode(nodeName, isSvg) {\n\t\tvar node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\t\tnode.normalizedNodeName = nodeName;\n\t\treturn node;\n\t}\n\n\tfunction removeNode(node) {\n\t\tvar parentNode = node.parentNode;\n\t\tif (parentNode) parentNode.removeChild(node);\n\t}\n\n\tfunction setAccessor(node, name, old, value, isSvg) {\n\t\tif (name === 'className') name = 'class';\n\n\t\tif (name === 'key') {} else if (name === 'ref') {\n\t\t\tapplyRef(old, null);\n\t\t\tapplyRef(value, node);\n\t\t} else if (name === 'class' && !isSvg) {\n\t\t\tnode.className = value || '';\n\t\t} else if (name === 'style') {\n\t\t\tif (!value || typeof value === 'string' || typeof old === 'string') {\n\t\t\t\tnode.style.cssText = value || '';\n\t\t\t}\n\t\t\tif (value && typeof value === 'object') {\n\t\t\t\tif (typeof old !== 'string') {\n\t\t\t\t\tfor (var i in old) {\n\t\t\t\t\t\tif (!(i in value)) node.style[i] = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (var _i in value) {\n\t\t\t\t\tnode.style[_i] = typeof value[_i] === 'number' && IS_NON_DIMENSIONAL.test(_i) === false ? value[_i] + 'px' : value[_i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\t\tif (value) node.innerHTML = value.__html || '';\n\t\t} else if (name[0] == 'o' && name[1] == 'n') {\n\t\t\tvar useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\t\tname = name.toLowerCase().substring(2);\n\t\t\tif (value) {\n\t\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t\t} else {\n\t\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t\t}\n\t\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t\t} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n\t\t\ttry {\n\t\t\t\tnode[name] = value == null ? '' : value;\n\t\t\t} catch (e) {}\n\t\t\tif ((value == null || value === false) && name != 'spellcheck') node.removeAttribute(name);\n\t\t} else {\n\t\t\tvar ns = isSvg && name !== (name = name.replace(/^xlink:?/, ''));\n\n\t\t\tif (value == null || value === false) {\n\t\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction eventProxy(e) {\n\t\treturn this._listeners[e.type](options.event && options.event(e) || e);\n\t}\n\n\tvar mounts = [];\n\n\tvar diffLevel = 0;\n\n\tvar isSvgMode = false;\n\n\tvar hydrating = false;\n\n\tfunction flushMounts() {\n\t\tvar c = void 0;\n\t\twhile (c = mounts.shift()) {\n\t\t\tif (options.afterMount) options.afterMount(c);\n\t\t\tif (c.componentDidMount) c.componentDidMount();\n\t\t}\n\t}\n\n\tfunction diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t\tif (!diffLevel++) {\n\t\t\tisSvgMode = parent != null && parent.ownerSVGElement !== undefined;\n\n\t\t\thydrating = dom != null && !(ATTR_KEY in dom);\n\t\t}\n\n\t\tvar ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t\tif (parent && ret.parentNode !== parent) parent.appendChild(ret);\n\n\t\tif (! --diffLevel) {\n\t\t\thydrating = false;\n\n\t\t\tif (!componentRoot) flushMounts();\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\tfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\t\tvar out = dom,\n\t\t    prevSvgMode = isSvgMode;\n\n\t\tif (vnode == null || typeof vnode === 'boolean') vnode = '';\n\n\t\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\t\t\tif (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t\tif (dom.nodeValue != vnode) {\n\t\t\t\t\tdom.nodeValue = vnode;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tout = document.createTextNode(vnode);\n\t\t\t\tif (dom) {\n\t\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tout[ATTR_KEY] = true;\n\n\t\t\treturn out;\n\t\t}\n\n\t\tvar vnodeName = vnode.nodeName;\n\t\tif (typeof vnodeName === 'function') {\n\t\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t\t}\n\n\t\tisSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;\n\n\t\tvnodeName = String(vnodeName);\n\t\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\t\tif (dom) {\n\t\t\t\twhile (dom.firstChild) {\n\t\t\t\t\tout.appendChild(dom.firstChild);\n\t\t\t\t}\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tvar fc = out.firstChild,\n\t\t    props = out[ATTR_KEY],\n\t\t    vchildren = vnode.children;\n\n\t\tif (props == null) {\n\t\t\tprops = out[ATTR_KEY] = {};\n\t\t\tfor (var a = out.attributes, i = a.length; i--;) {\n\t\t\t\tprops[a[i].name] = a[i].value;\n\t\t\t}\n\t\t}\n\n\t\tif (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {\n\t\t\tif (fc.nodeValue != vchildren[0]) {\n\t\t\t\tfc.nodeValue = vchildren[0];\n\t\t\t}\n\t\t} else if (vchildren && vchildren.length || fc != null) {\n\t\t\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);\n\t\t\t}\n\n\t\tdiffAttributes(out, vnode.attributes, props);\n\n\t\tisSvgMode = prevSvgMode;\n\n\t\treturn out;\n\t}\n\n\tfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\t\tvar originalChildren = dom.childNodes,\n\t\t    children = [],\n\t\t    keyed = {},\n\t\t    keyedLen = 0,\n\t\t    min = 0,\n\t\t    len = originalChildren.length,\n\t\t    childrenLen = 0,\n\t\t    vlen = vchildren ? vchildren.length : 0,\n\t\t    j = void 0,\n\t\t    c = void 0,\n\t\t    f = void 0,\n\t\t    vchild = void 0,\n\t\t    child = void 0;\n\n\t\tif (len !== 0) {\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar _child = originalChildren[i],\n\t\t\t\t    props = _child[ATTR_KEY],\n\t\t\t\t    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;\n\t\t\t\tif (key != null) {\n\t\t\t\t\tkeyedLen++;\n\t\t\t\t\tkeyed[key] = _child;\n\t\t\t\t} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {\n\t\t\t\t\tchildren[childrenLen++] = _child;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (vlen !== 0) {\n\t\t\tfor (var _i = 0; _i < vlen; _i++) {\n\t\t\t\tvchild = vchildren[_i];\n\t\t\t\tchild = null;\n\n\t\t\t\tvar _key = vchild.key;\n\t\t\t\tif (_key != null) {\n\t\t\t\t\tif (keyedLen && keyed[_key] !== undefined) {\n\t\t\t\t\t\tchild = keyed[_key];\n\t\t\t\t\t\tkeyed[_key] = undefined;\n\t\t\t\t\t\tkeyedLen--;\n\t\t\t\t\t}\n\t\t\t\t} else if (min < childrenLen) {\n\t\t\t\t\t\tfor (j = min; j < childrenLen; j++) {\n\t\t\t\t\t\t\tif (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\t\t\tif (j === childrenLen - 1) childrenLen--;\n\t\t\t\t\t\t\t\tif (j === min) min++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\t\tf = originalChildren[_i];\n\t\t\t\tif (child && child !== dom && child !== f) {\n\t\t\t\t\tif (f == null) {\n\t\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t\t} else if (child === f.nextSibling) {\n\t\t\t\t\t\tremoveNode(f);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (keyedLen) {\n\t\t\tfor (var _i2 in keyed) {\n\t\t\t\tif (keyed[_i2] !== undefined) recollectNodeTree(keyed[_i2], false);\n\t\t\t}\n\t\t}\n\n\t\twhile (min <= childrenLen) {\n\t\t\tif ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);\n\t\t}\n\t}\n\n\tfunction recollectNodeTree(node, unmountOnly) {\n\t\tvar component = node._component;\n\t\tif (component) {\n\t\t\tunmountComponent(component);\n\t\t} else {\n\t\t\tif (node[ATTR_KEY] != null) applyRef(node[ATTR_KEY].ref, null);\n\n\t\t\tif (unmountOnly === false || node[ATTR_KEY] == null) {\n\t\t\t\tremoveNode(node);\n\t\t\t}\n\n\t\t\tremoveChildren(node);\n\t\t}\n\t}\n\n\tfunction removeChildren(node) {\n\t\tnode = node.lastChild;\n\t\twhile (node) {\n\t\t\tvar next = node.previousSibling;\n\t\t\trecollectNodeTree(node, true);\n\t\t\tnode = next;\n\t\t}\n\t}\n\n\tfunction diffAttributes(dom, attrs, old) {\n\t\tvar name = void 0;\n\n\t\tfor (name in old) {\n\t\t\tif (!(attrs && attrs[name] != null) && old[name] != null) {\n\t\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t\t}\n\t\t}\n\n\t\tfor (name in attrs) {\n\t\t\tif (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {\n\t\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar recyclerComponents = [];\n\n\tfunction createComponent(Ctor, props, context) {\n\t\tvar inst = void 0,\n\t\t    i = recyclerComponents.length;\n\n\t\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\t\tinst = new Ctor(props, context);\n\t\t\tComponent.call(inst, props, context);\n\t\t} else {\n\t\t\tinst = new Component(props, context);\n\t\t\tinst.constructor = Ctor;\n\t\t\tinst.render = doRender;\n\t\t}\n\n\t\twhile (i--) {\n\t\t\tif (recyclerComponents[i].constructor === Ctor) {\n\t\t\t\tinst.nextBase = recyclerComponents[i].nextBase;\n\t\t\t\trecyclerComponents.splice(i, 1);\n\t\t\t\treturn inst;\n\t\t\t}\n\t\t}\n\n\t\treturn inst;\n\t}\n\n\tfunction doRender(props, state, context) {\n\t\treturn this.constructor(props, context);\n\t}\n\n\tfunction setComponentProps(component, props, renderMode, context, mountAll) {\n\t\tif (component._disable) return;\n\t\tcomponent._disable = true;\n\n\t\tcomponent.__ref = props.ref;\n\t\tcomponent.__key = props.key;\n\t\tdelete props.ref;\n\t\tdelete props.key;\n\n\t\tif (typeof component.constructor.getDerivedStateFromProps === 'undefined') {\n\t\t\tif (!component.base || mountAll) {\n\t\t\t\tif (component.componentWillMount) component.componentWillMount();\n\t\t\t} else if (component.componentWillReceiveProps) {\n\t\t\t\tcomponent.componentWillReceiveProps(props, context);\n\t\t\t}\n\t\t}\n\n\t\tif (context && context !== component.context) {\n\t\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\t\tcomponent.context = context;\n\t\t}\n\n\t\tif (!component.prevProps) component.prevProps = component.props;\n\t\tcomponent.props = props;\n\n\t\tcomponent._disable = false;\n\n\t\tif (renderMode !== NO_RENDER) {\n\t\t\tif (renderMode === SYNC_RENDER || options.syncComponentUpdates !== false || !component.base) {\n\t\t\t\trenderComponent(component, SYNC_RENDER, mountAll);\n\t\t\t} else {\n\t\t\t\tenqueueRender(component);\n\t\t\t}\n\t\t}\n\n\t\tapplyRef(component.__ref, component);\n\t}\n\n\tfunction renderComponent(component, renderMode, mountAll, isChild) {\n\t\tif (component._disable) return;\n\n\t\tvar props = component.props,\n\t\t    state = component.state,\n\t\t    context = component.context,\n\t\t    previousProps = component.prevProps || props,\n\t\t    previousState = component.prevState || state,\n\t\t    previousContext = component.prevContext || context,\n\t\t    isUpdate = component.base,\n\t\t    nextBase = component.nextBase,\n\t\t    initialBase = isUpdate || nextBase,\n\t\t    initialChildComponent = component._component,\n\t\t    skip = false,\n\t\t    snapshot = previousContext,\n\t\t    rendered = void 0,\n\t\t    inst = void 0,\n\t\t    cbase = void 0;\n\n\t\tif (component.constructor.getDerivedStateFromProps) {\n\t\t\tstate = extend(extend({}, state), component.constructor.getDerivedStateFromProps(props, state));\n\t\t\tcomponent.state = state;\n\t\t}\n\n\t\tif (isUpdate) {\n\t\t\tcomponent.props = previousProps;\n\t\t\tcomponent.state = previousState;\n\t\t\tcomponent.context = previousContext;\n\t\t\tif (renderMode !== FORCE_RENDER && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\t\tskip = true;\n\t\t\t} else if (component.componentWillUpdate) {\n\t\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t\t}\n\t\t\tcomponent.props = props;\n\t\t\tcomponent.state = state;\n\t\t\tcomponent.context = context;\n\t\t}\n\n\t\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\t\tcomponent._dirty = false;\n\n\t\tif (!skip) {\n\t\t\trendered = component.render(props, state, context);\n\n\t\t\tif (component.getChildContext) {\n\t\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t\t}\n\n\t\t\tif (isUpdate && component.getSnapshotBeforeUpdate) {\n\t\t\t\tsnapshot = component.getSnapshotBeforeUpdate(previousProps, previousState);\n\t\t\t}\n\n\t\t\tvar childComponent = rendered && rendered.nodeName,\n\t\t\t    toUnmount = void 0,\n\t\t\t    base = void 0;\n\n\t\t\tif (typeof childComponent === 'function') {\n\n\t\t\t\tvar childProps = getNodeProps(rendered);\n\t\t\t\tinst = initialChildComponent;\n\n\t\t\t\tif (inst && inst.constructor === childComponent && childProps.key == inst.__key) {\n\t\t\t\t\tsetComponentProps(inst, childProps, SYNC_RENDER, context, false);\n\t\t\t\t} else {\n\t\t\t\t\ttoUnmount = inst;\n\n\t\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\t\tinst._parentComponent = component;\n\t\t\t\t\tsetComponentProps(inst, childProps, NO_RENDER, context, false);\n\t\t\t\t\trenderComponent(inst, SYNC_RENDER, mountAll, true);\n\t\t\t\t}\n\n\t\t\t\tbase = inst.base;\n\t\t\t} else {\n\t\t\t\tcbase = initialBase;\n\n\t\t\t\ttoUnmount = initialChildComponent;\n\t\t\t\tif (toUnmount) {\n\t\t\t\t\tcbase = component._component = null;\n\t\t\t\t}\n\n\t\t\t\tif (initialBase || renderMode === SYNC_RENDER) {\n\t\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (initialBase && base !== initialBase && inst !== initialChildComponent) {\n\t\t\t\tvar baseParent = initialBase.parentNode;\n\t\t\t\tif (baseParent && base !== baseParent) {\n\t\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\t\tif (!toUnmount) {\n\t\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (toUnmount) {\n\t\t\t\tunmountComponent(toUnmount);\n\t\t\t}\n\n\t\t\tcomponent.base = base;\n\t\t\tif (base && !isChild) {\n\t\t\t\tvar componentRef = component,\n\t\t\t\t    t = component;\n\t\t\t\twhile (t = t._parentComponent) {\n\t\t\t\t\t(componentRef = t).base = base;\n\t\t\t\t}\n\t\t\t\tbase._component = componentRef;\n\t\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t\t}\n\t\t}\n\n\t\tif (!isUpdate || mountAll) {\n\t\t\tmounts.push(component);\n\t\t} else if (!skip) {\n\n\t\t\tif (component.componentDidUpdate) {\n\t\t\t\tcomponent.componentDidUpdate(previousProps, previousState, snapshot);\n\t\t\t}\n\t\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t\t}\n\n\t\twhile (component._renderCallbacks.length) {\n\t\t\tcomponent._renderCallbacks.pop().call(component);\n\t\t}if (!diffLevel && !isChild) flushMounts();\n\t}\n\n\tfunction buildComponentFromVNode(dom, vnode, context, mountAll) {\n\t\tvar c = dom && dom._component,\n\t\t    originalComponent = c,\n\t\t    oldDom = dom,\n\t\t    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n\t\t    isOwner = isDirectOwner,\n\t\t    props = getNodeProps(vnode);\n\t\twhile (c && !isOwner && (c = c._parentComponent)) {\n\t\t\tisOwner = c.constructor === vnode.nodeName;\n\t\t}\n\n\t\tif (c && isOwner && (!mountAll || c._component)) {\n\t\t\tsetComponentProps(c, props, ASYNC_RENDER, context, mountAll);\n\t\t\tdom = c.base;\n\t\t} else {\n\t\t\tif (originalComponent && !isDirectOwner) {\n\t\t\t\tunmountComponent(originalComponent);\n\t\t\t\tdom = oldDom = null;\n\t\t\t}\n\n\t\t\tc = createComponent(vnode.nodeName, props, context);\n\t\t\tif (dom && !c.nextBase) {\n\t\t\t\tc.nextBase = dom;\n\n\t\t\t\toldDom = null;\n\t\t\t}\n\t\t\tsetComponentProps(c, props, SYNC_RENDER, context, mountAll);\n\t\t\tdom = c.base;\n\n\t\t\tif (oldDom && dom !== oldDom) {\n\t\t\t\toldDom._component = null;\n\t\t\t\trecollectNodeTree(oldDom, false);\n\t\t\t}\n\t\t}\n\n\t\treturn dom;\n\t}\n\n\tfunction unmountComponent(component) {\n\t\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\t\tvar base = component.base;\n\n\t\tcomponent._disable = true;\n\n\t\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\t\tcomponent.base = null;\n\n\t\tvar inner = component._component;\n\t\tif (inner) {\n\t\t\tunmountComponent(inner);\n\t\t} else if (base) {\n\t\t\tif (base[ATTR_KEY] != null) applyRef(base[ATTR_KEY].ref, null);\n\n\t\t\tcomponent.nextBase = base;\n\n\t\t\tremoveNode(base);\n\t\t\trecyclerComponents.push(component);\n\n\t\t\tremoveChildren(base);\n\t\t}\n\n\t\tapplyRef(component.__ref, null);\n\t}\n\n\tfunction Component(props, context) {\n\t\tthis._dirty = true;\n\n\t\tthis.context = context;\n\n\t\tthis.props = props;\n\n\t\tthis.state = this.state || {};\n\n\t\tthis._renderCallbacks = [];\n\t}\n\n\textend(Component.prototype, {\n\t\tsetState: function setState(state, callback) {\n\t\t\tif (!this.prevState) this.prevState = this.state;\n\t\t\tthis.state = extend(extend({}, this.state), typeof state === 'function' ? state(this.state, this.props) : state);\n\t\t\tif (callback) this._renderCallbacks.push(callback);\n\t\t\tenqueueRender(this);\n\t\t},\n\t\tforceUpdate: function forceUpdate(callback) {\n\t\t\tif (callback) this._renderCallbacks.push(callback);\n\t\t\trenderComponent(this, FORCE_RENDER);\n\t\t},\n\t\trender: function render() {}\n\t});\n\n\tfunction render(vnode, parent, merge) {\n\t  return diff(merge, vnode, {}, false, parent, false);\n\t}\n\n\tfunction createRef() {\n\t\treturn {};\n\t}\n\n\tvar preact = {\n\t\th: h,\n\t\tcreateElement: h,\n\t\tcloneElement: cloneElement,\n\t\tcreateRef: createRef,\n\t\tComponent: Component,\n\t\trender: render,\n\t\trerender: rerender,\n\t\toptions: options\n\t};\n\n\texports.default = preact;\n\texports.h = h;\n\texports.createElement = h;\n\texports.cloneElement = cloneElement;\n\texports.createRef = createRef;\n\texports.Component = Component;\n\texports.render = render;\n\texports.rerender = rerender;\n\texports.options = options;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=preact.umd.js.map\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar button_enums_1 = require(\"../../button-bar/button.enums\");\r\nexports.checkMyWorkBtn = [\r\n    {\r\n        id: button_enums_1.ButtonBarIcons.checkMyWork,\r\n        tooltip: \"Check my work\",\r\n        className: \"defaultBtn-check-mywork-icon\",\r\n        text: \"Check my work\",\r\n        icon: {\r\n            iconCls_left: \"la la-tick\"\r\n        }\r\n    },\r\n    {\r\n        id: button_enums_1.ButtonBarIcons.tryAgain,\r\n        tooltip: \"Try Again\",\r\n        className: \"defaultBtn-tryAgain\",\r\n        text: \"Try again\",\r\n        icon: {\r\n            iconCls_left: \"la la-try-again\"\r\n        }\r\n    }\r\n];\r\nexports.hintsBtn = [\r\n    {\r\n        id: button_enums_1.ButtonBarIcons.showHint,\r\n        tooltip: \"Hint\",\r\n        className: \"defaultBtn-hint-icon\",\r\n        text: \"Hint\",\r\n        icon: {\r\n            iconCls_left: \"la la-hintDefault\"\r\n        }\r\n    },\r\n    {\r\n        id: button_enums_1.ButtonBarIcons.closeHint,\r\n        tooltip: \"Close hint\",\r\n        className: \"defaultBtn-hintEnabled-icon\",\r\n        text: \"Hint\",\r\n        icon: {\r\n            iconCls_left: \"la la-hintDefault\",\r\n            iconCls_right: \"la la-close\"\r\n        }\r\n    }\r\n];\r\nexports.resetBtn = [\r\n    {\r\n        id: button_enums_1.ButtonBarIcons.reset,\r\n        tooltip: \"Reset\",\r\n        className: \"defaultBtn-reset-icon\",\r\n        text: \"Reset\",\r\n        icon: {\r\n            iconCls_left: \"la la-reset\"\r\n        }\r\n    }\r\n];\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar base_activity_player_1 = require(\"libs-base-activity-player/src/base-activity-player\");\r\nvar preact_1 = require(\"preact\");\r\nvar singleItemActivityPlayer_component_1 = require(\"./singleItemActivityPlayer.component\");\r\nvar SingleItemActivityPlayer = /** @class */ (function (_super) {\r\n    __extends(SingleItemActivityPlayer, _super);\r\n    function SingleItemActivityPlayer() {\r\n        var _this = _super.call(this) || this;\r\n        _this.options = null;\r\n        return _this;\r\n    }\r\n    /**\r\n    * allowed init params are ( launchId, items [, container] [, options] )\r\n    * container and options are optional params\r\n    * @param launchId\r\n    * @param items\r\n    * @param args1\r\n    * @param args2\r\n    */\r\n    SingleItemActivityPlayer.prototype.init = function (launchId, items, args1, args2) {\r\n        _super.prototype.init.call(this, launchId, items, args1, args2);\r\n        this.options = args2 ? args2 : (args1 instanceof HTMLElement ? args2 : args1);\r\n    };\r\n    SingleItemActivityPlayer.prototype.render = function (launchId, container) {\r\n        try {\r\n            if (!container) {\r\n                if (!this.container) {\r\n                    throw new Error('Container not present to render Activity Player');\r\n                }\r\n                else {\r\n                    container = this.container;\r\n                }\r\n            }\r\n            preact_1.render(preact_1.h(singleItemActivityPlayer_component_1.SingleItemActivityComponent, { renderItemFuncProp: this.renderItem.bind(this), getItems: this.getItems.bind(this), launchId: launchId, eventMgr: this.eventMgr, options: this.options }), container);\r\n        }\r\n        catch (exception) {\r\n            this.errorHandler(this.launchId, exception);\r\n        }\r\n    };\r\n    SingleItemActivityPlayer.prototype.focalise = function () {\r\n        this.getItems()[0].focalise();\r\n    };\r\n    return SingleItemActivityPlayer;\r\n}(base_activity_player_1.BaseActivityPlayer));\r\nexports.default = SingleItemActivityPlayer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar preact_1 = require(\"preact\");\r\nvar itemPlayer_component_1 = require(\"../item-player/itemPlayer.component\");\r\nvar button_enums_1 = require(\"../button-bar/button.enums\");\r\nvar button_config_1 = require(\"./meta/button.config\");\r\nrequire(\"./../../style/index.less\");\r\nrequire(\"./styles/style.less\");\r\nvar button_bar_component_1 = require(\"../button-bar/button-bar.component\");\r\nvar SingleItemActivityComponent = /** @class */ (function (_super) {\r\n    __extends(SingleItemActivityComponent, _super);\r\n    function SingleItemActivityComponent(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        // Buttons visible at init.\r\n        _this.defaultButtonsArray = button_config_1.checkMyWorkBtn.concat(button_config_1.resetBtn);\r\n        // Buttons that can be either hidden or visible as per user interaction.\r\n        _this.hiddenButtons = [button_enums_1.ButtonBarIcons.tryAgain];\r\n        _this.state = {\r\n            'isTryAgainEnabled': false,\r\n            'isHintsAvailable': false\r\n        };\r\n        _this._item = _this.props.getItems()[0];\r\n        return _this;\r\n    }\r\n    SingleItemActivityComponent.prototype.render = function (props, state) {\r\n        var activityContainerCls = \"activity-player-container\";\r\n        var uiStyles;\r\n        var playerConfig = props.options && props.options.playerConfig;\r\n        playerConfig.uiStyles && (uiStyles = playerConfig.uiStyles);\r\n        var playerBtns = playerConfig.buttons;\r\n        var isButtonBarVisible = (playerBtns && playerBtns.visible != undefined) ? playerBtns.visible : true;\r\n        if (!(isButtonBarVisible)) {\r\n            activityContainerCls += ' without-button-bar';\r\n        }\r\n        if (uiStyles && uiStyles.dimensions && uiStyles.dimensions == 'content-dim') {\r\n            activityContainerCls += ' ap-content-dim';\r\n        }\r\n        return (preact_1.h(\"div\", { class: activityContainerCls, style: this.getUiStyles(uiStyles) },\r\n            preact_1.h(itemPlayer_component_1.ItemPlayerComponent, { uiStyles: uiStyles, isButtonBarVisible: isButtonBarVisible, item: this._item, renderItemFuncProp: props.renderItemFuncProp, setState: this.setState.bind(this) }),\r\n            isButtonBarVisible && preact_1.h(button_bar_component_1.ButtonBarComponent, { item: this._item, eventMgr: props.eventMgr, launchId: props.launchId })));\r\n    };\r\n    /**\r\n * The styles passed in playerConfig is converted in obj. and returned\r\n * @param uiStyles passed in playerConfig\r\n */\r\n    SingleItemActivityComponent.prototype.getUiStyles = function (styles) {\r\n        var activityPlayerStyles = \"\";\r\n        if (styles) {\r\n            var allowedUiStyle = ['border', 'box-shadow'];\r\n            var parsedStyles = styles;\r\n            for (var property in parsedStyles) {\r\n                if (allowedUiStyle.indexOf(property) >= 0) {\r\n                    activityPlayerStyles += property + \":\" + parsedStyles[property] + \";\";\r\n                }\r\n            }\r\n        }\r\n        return activityPlayerStyles;\r\n    };\r\n    return SingleItemActivityComponent;\r\n}(preact_1.Component));\r\nexports.SingleItemActivityComponent = SingleItemActivityComponent;\r\n","// extracted by mini-css-extract-plugin","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar preact_1 = require(\"preact\");\r\nvar button_component_1 = require(\"./button.component\");\r\nvar button_enums_1 = require(\"./button.enums\");\r\nvar button_config_1 = require(\"../activity-player/meta/button.config\");\r\nvar event_enum_1 = require(\"libs-base-activity-player/src/EventManager/event.enum\");\r\nvar event_args_1 = require(\"libs-base-activity-player/src/EventManager/event-args\");\r\nvar ButtonBarComponent = /** @class */ (function (_super) {\r\n    __extends(ButtonBarComponent, _super);\r\n    function ButtonBarComponent(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        // Buttons visible at init.\r\n        _this.defaultButtonsArray = button_config_1.checkMyWorkBtn.concat(button_config_1.resetBtn);\r\n        _this.state = {\r\n            'isTryAgainEnabled': false\r\n        };\r\n        _this._item = _this.props.item;\r\n        _this.eventMgr = _this.props.eventMgr;\r\n        _this.launchId = _this.props.launchId;\r\n        return _this;\r\n    }\r\n    ButtonBarComponent.prototype.createButtonJSX = function (buttonConfig) {\r\n        return (preact_1.h(button_component_1.ButtonComponent, { id: buttonConfig.id, leftIcon: buttonConfig.icon ? (buttonConfig.icon.iconCls_left) : null, rightIcon: buttonConfig.icon ? (buttonConfig.icon.iconCls_right) : null, label: buttonConfig.text, tooltip: buttonConfig.tooltip, onButtonClick: this.onClick.bind(this) }));\r\n    };\r\n    ButtonBarComponent.prototype.createButtons = function () {\r\n        var _this = this;\r\n        var hiddenButtons = this.state.isTryAgainEnabled ? button_enums_1.ButtonBarIcons.checkMyWork : button_enums_1.ButtonBarIcons.tryAgain;\r\n        var buttons = [];\r\n        var defaultButtonsArray = hiddenButtons.length > 0 ? this.removeHiddenButtons(hiddenButtons) : this.defaultButtonsArray;\r\n        defaultButtonsArray.map(function (value, index) {\r\n            buttons.push(_this.createButtonJSX(value), index < defaultButtonsArray.length - 1 ? preact_1.h(\"div\", { class: \"vertical-seperator\" }) : null);\r\n        });\r\n        return buttons;\r\n    };\r\n    // Handling Button clicks by user and performing specific operations and API calls.\r\n    ButtonBarComponent.prototype.onClick = function (event) {\r\n        var _this = this;\r\n        var iconId = event.currentTarget.getAttribute(\"id\");\r\n        var buttonType = button_enums_1.ButtonBarIcons[iconId];\r\n        switch (buttonType) {\r\n            case button_enums_1.ButtonBarIcons.checkMyWork: {\r\n                this._item.submit(function (response) {\r\n                    if (response) {\r\n                        var eventArgs = {\r\n                            launchId: _this.launchId,\r\n                            type: event_enum_1.EVENTS.CHECK_ANSWER,\r\n                            itemId: _this._item.leonardoId,\r\n                            response: response\r\n                        };\r\n                        _this.eventMgr.emit(event_enum_1.EVENTS.CHECK_ANSWER, new event_args_1.SubmitEventArgs(eventArgs));\r\n                    }\r\n                    _this.setState({\r\n                        'isTryAgainEnabled': true\r\n                    });\r\n                }, '');\r\n                break;\r\n            }\r\n            case button_enums_1.ButtonBarIcons.reset: {\r\n                this._item.reset();\r\n                this.setState({\r\n                    'isTryAgainEnabled': false\r\n                });\r\n                break;\r\n            }\r\n            case button_enums_1.ButtonBarIcons.tryAgain: {\r\n                this._item.retry(function (response) {\r\n                    if (response) {\r\n                        var eventArgs = {\r\n                            launchId: _this.launchId,\r\n                            type: event_enum_1.EVENTS.RETRY\r\n                        };\r\n                        _this.eventMgr.emit(event_enum_1.EVENTS.RETRY, new event_args_1.EventArgs(eventArgs));\r\n                    }\r\n                    _this.setState({\r\n                        'isTryAgainEnabled': false\r\n                    });\r\n                });\r\n                break;\r\n            }\r\n            case button_enums_1.ButtonBarIcons.showHint: {\r\n                break;\r\n            }\r\n            case button_enums_1.ButtonBarIcons.closeHint: {\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    ButtonBarComponent.prototype.removeHiddenButtons = function (hiddenButtons) {\r\n        return this.defaultButtonsArray.filter(function (btn) { return hiddenButtons.indexOf(btn[\"id\"]) == -1; });\r\n    };\r\n    ButtonBarComponent.prototype.render = function () {\r\n        return (preact_1.h(\"div\", { class: \"buttons-container\" }, this.createButtons()));\r\n    };\r\n    return ButtonBarComponent;\r\n}(preact_1.Component));\r\nexports.ButtonBarComponent = ButtonBarComponent;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar preact_1 = require(\"preact\");\r\nrequire(\"./styles/style.less\");\r\nvar ButtonComponent = /** @class */ (function (_super) {\r\n    __extends(ButtonComponent, _super);\r\n    function ButtonComponent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ButtonComponent.prototype.render = function (props, state) {\r\n        return (preact_1.h(\"div\", { id: props.id, class: \"default-btn \" + props.leftIcon, title: props.tooltip, onClick: function (e) { return props.onButtonClick(e); } },\r\n            preact_1.h(\"span\", { class: \"default-btn-label\" },\r\n                \" \",\r\n                props.label,\r\n                \" \"),\r\n            props.rightIcon && preact_1.h(\"span\", { class: props.rightIcon })));\r\n    };\r\n    return ButtonComponent;\r\n}(preact_1.Component));\r\nexports.ButtonComponent = ButtonComponent;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ButtonBarIcons = {\r\n    reset: \"reset\",\r\n    checkMyWork: \"checkMyWork\",\r\n    tryAgain: \"tryAgain\",\r\n    showHint: \"showHint\",\r\n    closeHint: \"closeHint\",\r\n};\r\n","// extracted by mini-css-extract-plugin","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar preact_1 = require(\"preact\");\r\nvar ItemPlayerComponent = /** @class */ (function (_super) {\r\n    __extends(ItemPlayerComponent, _super);\r\n    function ItemPlayerComponent(props) {\r\n        return _super.call(this, props) || this;\r\n    }\r\n    ItemPlayerComponent.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var uiStyles = this.props.uiStyles;\r\n        var renderPromsise = this.props.renderItemFuncProp(0, this.base);\r\n        renderPromsise.then(function (itemAppInstance) {\r\n            _this._item = itemAppInstance;\r\n            (uiStyles && uiStyles.dimensions && uiStyles.dimensions == 'content-dim')\r\n                && (_this.base.style.display = 'inline-block');\r\n            _this.base.classList.remove(\"item-loader\");\r\n            setTimeout(function () {\r\n                _this._item.focalise();\r\n            }, 100);\r\n        });\r\n    };\r\n    ItemPlayerComponent.prototype.render = function (props) {\r\n        var itemPlayerContainerCls = \"item-player-container item-loader\";\r\n        var uiStyles = props.uiStyles;\r\n        if (uiStyles && uiStyles.dimensions && uiStyles.dimensions == 'content-dim') {\r\n            itemPlayerContainerCls += ' ip-content-dim';\r\n        }\r\n        return (preact_1.h(\"div\", { class: itemPlayerContainerCls }));\r\n    };\r\n    return ItemPlayerComponent;\r\n}(preact_1.Component));\r\nexports.ItemPlayerComponent = ItemPlayerComponent;\r\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}