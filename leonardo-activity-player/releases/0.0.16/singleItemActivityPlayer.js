!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){!function(t){"use strict";var e=function(){},n={},o=[],r=[];function i(t,i){var s=r,a=void 0,c=void 0,u=void 0,l=void 0;for(l=arguments.length;l-- >2;)o.push(arguments[l]);for(i&&null!=i.children&&(o.length||o.push(i.children),delete i.children);o.length;)if((c=o.pop())&&void 0!==c.pop)for(l=c.length;l--;)o.push(c[l]);else"boolean"==typeof c&&(c=null),(u="function"!=typeof t)&&(null==c?c="":"number"==typeof c?c=String(c):"string"!=typeof c&&(u=!1)),u&&a?s[s.length-1]+=c:s===r?s=[c]:s.push(c),a=u;var p=new e;return p.nodeName=t,p.children=s,p.attributes=null==i?void 0:i,p.key=null==i?void 0:i.key,void 0!==n.vnode&&n.vnode(p),p}function s(t,e){for(var n in e)t[n]=e[n];return t}function a(t,e){t&&("function"==typeof t?t(e):t.current=e)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function u(t,e){return i(t.nodeName,s(s({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}var l=0,p=1,d=2,f=3,h="__preactattr_",m=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,y=[];function v(t){!t._dirty&&(t._dirty=!0)&&1==y.push(t)&&(n.debounceRendering||c)(g)}function g(){for(var t=void 0;t=y.pop();)t._dirty&&V(t)}function _(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&I(t,e.nodeName):n||t._componentConstructor===e.nodeName}function I(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function b(t){var e=s({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===e[o]&&(e[o]=n[o]);return e}function S(t){var e=t.parentNode;e&&e.removeChild(t)}function E(t,e,n,o,r){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)a(n,null),a(o,t);else if("class"!==e||r)if("style"===e){if(o&&"string"!=typeof o&&"string"!=typeof n||(t.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(t.style[i]="");for(var s in o)t.style[s]="number"==typeof o[s]&&!1===m.test(s)?o[s]+"px":o[s]}}else if("dangerouslySetInnerHTML"===e)o&&(t.innerHTML=o.__html||"");else if("o"==e[0]&&"n"==e[1]){var c=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),o?n||t.addEventListener(e,C,c):t.removeEventListener(e,C,c),(t._listeners||(t._listeners={}))[e]=o}else if("list"!==e&&"type"!==e&&!r&&e in t){try{t[e]=null==o?"":o}catch(t){}null!=o&&!1!==o||"spellcheck"==e||t.removeAttribute(e)}else{var u=r&&e!==(e=e.replace(/^xlink:?/,""));null==o||!1===o?u?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof o&&(u?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),o):t.setAttribute(e,o))}else t.className=o||""}function C(t){return this._listeners[t.type](n.event&&n.event(t)||t)}var P=[],N=0,B=!1,w=!1;function A(){for(var t=void 0;t=P.shift();)n.afterMount&&n.afterMount(t),t.componentDidMount&&t.componentDidMount()}function O(t,e,n,o,r,i){N++||(B=null!=r&&void 0!==r.ownerSVGElement,w=null!=t&&!(h in t));var s=x(t,e,n,o,i);return r&&s.parentNode!==r&&r.appendChild(s),--N||(w=!1,i||A()),s}function x(t,e,n,o,r){var i=t,s=B;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),R(t,!0))),i[h]=!0,i;var a,c,u=e.nodeName;if("function"==typeof u)return function(t,e,n,o){for(var r=t&&t._component,i=r,s=t,a=r&&t._componentConstructor===e.nodeName,c=a,u=b(e);r&&!c&&(r=r._parentComponent);)c=r.constructor===e.nodeName;return r&&c&&(!o||r._component)?(j(r,u,f,n,o),t=r.base):(i&&!a&&(W(i),t=s=null),r=k(e.nodeName,u,n),t&&!r.nextBase&&(r.nextBase=t,s=null),j(r,u,p,n,o),t=r.base,s&&t!==s&&(s._component=null,R(s,!1))),t}(t,e,n,o);if(B="svg"===u||"foreignObject"!==u&&B,u=String(u),(!t||!I(t,u))&&(a=u,(c=B?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,i=c,t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),R(t,!0)}var l=i.firstChild,d=i[h],m=e.children;if(null==d){d=i[h]={};for(var y=i.attributes,v=y.length;v--;)d[y[v].name]=y[v].value}return!w&&m&&1===m.length&&"string"==typeof m[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=m[0]&&(l.nodeValue=m[0]):(m&&m.length||null!=l)&&function(t,e,n,o,r){var i=t.childNodes,s=[],a={},c=0,u=0,l=i.length,p=0,d=e?e.length:0,f=void 0,m=void 0,y=void 0,v=void 0,g=void 0;if(0!==l)for(var I=0;I<l;I++){var b=i[I],E=b[h],C=d&&E?b._component?b._component.__key:E.key:null;null!=C?(c++,a[C]=b):(E||(void 0!==b.splitText?!r||b.nodeValue.trim():r))&&(s[p++]=b)}if(0!==d)for(var P=0;P<d;P++){v=e[P],g=null;var N=v.key;if(null!=N)c&&void 0!==a[N]&&(g=a[N],a[N]=void 0,c--);else if(u<p)for(f=u;f<p;f++)if(void 0!==s[f]&&_(m=s[f],v,r)){g=m,s[f]=void 0,f===p-1&&p--,f===u&&u++;break}g=x(g,v,n,o),y=i[P],g&&g!==t&&g!==y&&(null==y?t.appendChild(g):g===y.nextSibling?S(y):t.insertBefore(g,y))}if(c)for(var B in a)void 0!==a[B]&&R(a[B],!1);for(;u<=p;)void 0!==(g=s[p--])&&R(g,!1)}(i,m,n,o,w||null!=d.dangerouslySetInnerHTML),function(t,e,n){var o=void 0;for(o in n)e&&null!=e[o]||null==n[o]||E(t,o,n[o],n[o]=void 0,B);for(o in e)"children"===o||"innerHTML"===o||o in n&&e[o]===("value"===o||"checked"===o?t[o]:n[o])||E(t,o,n[o],n[o]=e[o],B)}(i,e.attributes,d),B=s,i}function R(t,e){var n=t._component;n?W(n):(null!=t[h]&&a(t[h].ref,null),!1!==e&&null!=t[h]||S(t),M(t))}function M(t){for(t=t.lastChild;t;){var e=t.previousSibling;R(t,!0),t=e}}var T=[];function k(t,e,n){var o=void 0,r=T.length;for(t.prototype&&t.prototype.render?(o=new t(e,n),U.call(o,e,n)):((o=new U(e,n)).constructor=t,o.render=H);r--;)if(T[r].constructor===t)return o.nextBase=T[r].nextBase,T.splice(r,1),o;return o}function H(t,e,n){return this.constructor(t,n)}function j(t,e,o,r,i){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r)),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,o!==l&&(o!==p&&!1===n.syncComponentUpdates&&t.base?v(t):V(t,p,i)),a(t.__ref,t))}function V(t,e,o,r){if(!t._disable){var i=t.props,a=t.state,c=t.context,u=t.prevProps||i,f=t.prevState||a,h=t.prevContext||c,m=t.base,y=t.nextBase,v=m||y,g=t._component,_=!1,I=h,S=void 0,E=void 0,C=void 0;if(t.constructor.getDerivedStateFromProps&&(a=s(s({},a),t.constructor.getDerivedStateFromProps(i,a)),t.state=a),m&&(t.props=u,t.state=f,t.context=h,e!==d&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(i,a,c)?_=!0:t.componentWillUpdate&&t.componentWillUpdate(i,a,c),t.props=i,t.state=a,t.context=c),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!_){S=t.render(i,a,c),t.getChildContext&&(c=s(s({},c),t.getChildContext())),m&&t.getSnapshotBeforeUpdate&&(I=t.getSnapshotBeforeUpdate(u,f));var B=S&&S.nodeName,w=void 0,x=void 0;if("function"==typeof B){var M=b(S);(E=g)&&E.constructor===B&&M.key==E.__key?j(E,M,p,c,!1):(w=E,t._component=E=k(B,M,c),E.nextBase=E.nextBase||y,E._parentComponent=t,j(E,M,l,c,!1),V(E,p,o,!0)),x=E.base}else C=v,(w=g)&&(C=t._component=null),(v||e===p)&&(C&&(C._component=null),x=O(C,S,c,o||!m,v&&v.parentNode,!0));if(v&&x!==v&&E!==g){var T=v.parentNode;T&&x!==T&&(T.replaceChild(x,v),w||(v._component=null,R(v,!1)))}if(w&&W(w),t.base=x,x&&!r){for(var H=t,U=t;U=U._parentComponent;)(H=U).base=x;x._component=H,x._componentConstructor=H.constructor}}for(!m||o?P.push(t):_||(t.componentDidUpdate&&t.componentDidUpdate(u,f,I),n.afterUpdate&&n.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);N||r||A()}}function W(t){n.beforeUnmount&&n.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var o=t._component;o?W(o):e&&(null!=e[h]&&a(e[h].ref,null),t.nextBase=e,S(e),T.push(t),M(e)),a(t.__ref,null)}function U(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function L(t,e,n){return O(n,t,{},!1,e,!1)}function D(){return{}}s(U.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=s(s({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),v(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),V(this,d)},render:function(){}});var J={h:i,createElement:i,cloneElement:u,createRef:D,Component:U,render:L,rerender:g,options:n};t.default=J,t.h=i,t.createElement=i,t.cloneElement=u,t.createRef=D,t.Component=U,t.render=L,t.rerender=g,t.options=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.launchId=t.launchId,this.type=t.type};e.EventArgs=i;var s=function(t){function e(e){var n=t.call(this,e)||this;return n.itemId=e.itemId,n.response=e.response,n}return r(e,t),e}(i);e.SubmitEventArgs=s;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.itemId="",n.playerInstance=e.playerInstance,n}return r(e,t),e}(i);e.ReadyEventArgs=a;var c=function(t){function e(e){var n=t.call(this,e)||this;return n.error=e.exception,n}return r(e,t),e}(i);e.ErrorEventArgs=c;var u=function(t){function e(e){var n=t.call(this,e)||this;return n.itemId=e.itemId,n.itemPayload=e.itemPayload,n}return r(e,t),e}(i);e.ChangeEventArgs=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EVENTS={READY:"ready",ERROR:"error",CHECK_ANSWER:"checkAnswer",RETRY:"retry",RESET:"reset",SUBMIT:"submit",HINT_CONSUMED:"hintConsumed",DESTROY:"destroy",CHANGE:"change",RENDER:"render"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonBarIcons={reset:"reset",checkMyWork:"checkMyWork",tryAgain:"tryAgain",showHint:"showHint",closeHint:"closeHint"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3);e.checkMyWorkBtn=[{id:o.ButtonBarIcons.checkMyWork,tooltip:"Check my work",className:"defaultBtn-check-mywork-icon",text:"Check my work",icon:{iconCls_left:"la la-tick"}},{id:o.ButtonBarIcons.tryAgain,tooltip:"Try Again",className:"defaultBtn-tryAgain",text:"Try again",icon:{iconCls_left:"la la-try-again"}}],e.hintsBtn=[{id:o.ButtonBarIcons.showHint,tooltip:"Hint",className:"defaultBtn-hint-icon",text:"Hint",icon:{iconCls_left:"la la-hintDefault"}},{id:o.ButtonBarIcons.closeHint,tooltip:"Close hint",className:"defaultBtn-hintEnabled-icon",text:"Hint",icon:{iconCls_left:"la la-hintDefault",iconCls_right:"la la-close"}}],e.resetBtn=[{id:o.ButtonBarIcons.reset,tooltip:"Reset",className:"defaultBtn-reset-icon",text:"Reset",icon:{iconCls_left:"la la-reset"}}]},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),s=n(0),a=n(9),c=function(t){function e(){var e=t.call(this)||this;return e.options=null,e}return r(e,t),e.prototype.init=function(e,n,o,r){return this.options=r||(o?o instanceof HTMLElement?r:o:null),t.prototype.init.call(this,e,n,o,r)},e.prototype.render=function(t,e){try{if(!e){if(!this.container)throw new Error("Container not present to render Activity Player");e=this.container}s.render(s.h(a.SingleItemActivityComponent,{renderItemFuncProp:this.renderItem.bind(this),getItems:this.getItems.bind(this),launchId:t,eventMgr:this.eventMgr,options:this.options}),e)}catch(t){this.errorHandler(this.launchId,t)}},e.prototype.focalise=function(){this.getItems()[0].focalise()},e}(i.BaseActivityPlayer);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=n(2),i=n(1),s=function(){function t(){this.items=[],this.launchId="",this.container=null,this.initializedItems=[],this.eventMgr=new LeonardoApp.EventEmitter}return t.prototype.init=function(t,e,n,i){var s=this,a=null;return this.launchId=t,i?(this.container=n,a=i):n instanceof HTMLElement?this.container=n:a=n,new Promise((function(n,i){try{if(a&&a.events)for(var c in a.events)s.subscribe(c,a.events[c]);for(var u=[],l=s,p=function(n){s.items[n]=new o.ItemApp;var i=a&&a.events?a.events:null,c=a&&a.playerConfig&&a.playerConfig.uiStyles?a.playerConfig.uiStyles:null,p=s.items[n].init(e[n],t,{events:i,uiStyle:c,eventMgr:l.eventMgr});u.push(p),p.then((function(){l.initializedItems[n]=l.items[n]})).catch((function(t){l.errorHandler(r.EVENTS.ERROR,t)}))},d=0;d<e.length;d++)p(d);Promise.all(u).then((function(t){n(l)}))}catch(e){s.errorHandler(t,e)}}))},t.prototype.destroy=function(){this.initializedItems.forEach((function(t){t.destroy()})),delete this.currentItem,this.initializedItems=[],this.items=[],this.itemsAPI=null,this.attemptsAPI=null;var t={launchId:this.launchId,type:r.EVENTS.DESTROY};this.eventMgr.emit(r.EVENTS.DESTROY,new i.EventArgs(t))},t.prototype.renderItem=function(t,e){var n=this;return new Promise((function(o,i){if(n.initializedItems[t])n.currentItem=n.items[t],n.items[t].render(e).then((function(){o(n.items[t])})).catch((function(t){n.errorHandler(r.EVENTS.ERROR,t)}));else var s=setInterval((function(){n.initializedItems[t]&&(clearInterval(s),n.currentItem=n.items[t],n.items[t].render(e).then((function(){o(n.items[t])})).catch((function(t){n.errorHandler(r.EVENTS.ERROR,t)})))}),50)}))},t.prototype.subscribe=function(t,e){this.eventMgr.on(t,e)},t.prototype.unsubscribe=function(t,e){this.eventMgr.off(t,e)},t.prototype.displayHints=function(){return this.getCurrentItem().showHints()},t.prototype.getItemCount=function(){return this.items.length},t.prototype.getItems=function(){return this.items},t.prototype.getCurrentItem=function(){return this.currentItem},t.prototype.getItem=function(t){return this.items[t]},t.prototype.save=function(t){},t.prototype.submit=function(t,e){this.getCurrentItem().submit(t,e)},t.prototype.retry=function(t){this.getCurrentItem().retry(t)},t.prototype.getResponses=function(){return{launchId:"<launchId>",items:[{itemId:"<itemId>",responseId:"<ResponseId>",maxScore:"<item-max-score>",gotScore:"<got-score>",status:"NotAttempted | InProgress | Submitted"}]}},t.prototype.errorHandler=function(t,e){var n={launchId:t,type:r.EVENTS.ERROR,exception:e};this.eventMgr.emit(r.EVENTS.ERROR,new i.ErrorEventArgs(n))},t}();e.BaseActivityPlayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(2),i=function(){function t(){this.id="",this._initComplete=!1,this.launchId=""}return t.prototype.init=function(t,e,n){this.launchId=e,this.options=n,this.itemsAPI=LeonardoApp.Services.get("items"),this.attemptsAPI=LeonardoApp.Services.get("attempts"),n&&n.eventMgr&&(this.eventMgr=n.eventMgr);var o=this;return new Promise((function(e,n){o.fetchItemJSON(t).then((function(t){o.itemJSON=t;var e=o.getItemType(t);return o.loadItemPlayer(e)})).then((function(t){t.init?o.itemPlayer=t.init():o.itemPlayer=t,o._initComplete=!0,e()}))}))},t.prototype.render=function(t){var e=this;this.options&&this.options.uiStyle&&(this.options.uiStyle.dimensions&&this.options.uiStyle.dimensions.includes("content")?this.options.uiStyle.height="expand":this.options.uiStyle.dimensions=this.options.uiStyle.dimensions&&this.options.uiStyle.dimensions.split("-")[0]+"-space");var n={};this.options&&this.options.events&&(n={change:this.options.events.change&&this.onChangeHandler.bind(this)});var o={config:this.itemJSON,events:n,uiStyle:this.options.uiStyle,playerButtons:{visible:!1}};o.uiStyle=new Object(o.uiStyle),o.uiStyle.widgetStyles={"box-shadow":"none",border:"none"};var r=this;return new Promise((function(n,i){if(e._initComplete)r.itemPlayer.addWidget?r.itemPlayer=r.itemPlayer.addWidget(e.itemJSON.leonardoId,t,o):(r.itemPlayer=new r.itemPlayer,o.itemJSON=o.config,r.itemPlayer.initItem(e.itemJSON.leonardoId,t,o)),n();else var s=setInterval((function(){r._initComplete&&(clearInterval(s),r.itemPlayer.addWidget?r.itemPlayer=r.itemPlayer.addWidget(r.itemJSON.leonardoId,t,o):(r.itemPlayer=new r.itemPlayer,o.itemJSON=o.config,r.itemPlayer.initItem(r.itemJSON.leonardoId,t,o)),n())}),50)}))},t.prototype.fetchItemJSON=function(t){var e=this;return new Promise((function(n,o){"object"==typeof t?n(t):"string"==typeof t&&e.itemsAPI.getItem(t).then((function(t){return n(t)})).catch((function(t){e.errorHandler(r.EVENTS.ERROR,t)}))}))},t.prototype.getItemType=function(t){return t.type},t.prototype.loadItemPlayer=function(t){var e=this,n=LeonardoApp.ModuleLoader;return new Promise((function(o,i){n&&n.loadModule(t).then((function(t){return o(t)})).catch((function(t){e.errorHandler(r.EVENTS.ERROR,t)}))}))},t.prototype.save=function(t){},t.prototype.submit=function(t,e){try{var n=void 0;if(this.itemPlayer.score){var i=this.itemPlayer.score();this.itemPlayer.displayFeedback(i),n={id:i.scoringId,launchId:this.launchId,score:[{itemId:this.itemJSON.leonardoId,maxScore:i.scoredJson.score,gotScore:i.scoredJson.gotScore}]}}else{var s=this.itemPlayer.grade();this.itemPlayer.displayFeedback(s),n={launchId:this.launchId,score:[{itemId:this.itemJSON.leonardoId,maxScore:s.maxScore,obtainedScore:s.obtainedScore,submissionState:s.stateJSON}]}}if(t)t(n);else{var a={launchId:this.launchId,type:r.EVENTS.CHECK_ANSWER,itemId:this.itemJSON.leonardoId,response:n};this.eventMgr.emit(1==e.isSubmit?r.EVENTS.SUBMIT:r.EVENTS.CHECK_ANSWER,new o.SubmitEventArgs(a))}}catch(t){this.errorHandler(this.launchId,t)}},t.prototype.getResponse=function(){return{launchId:"<launchId>",items:{itemId:"<itemId>",responseId:"<ResponseId>",maxScore:"<item-max-score>",gotScore:"<got-score>",status:"NotAttempted | InProgress | Submitted"}}},t.prototype.getResponses=function(){return{launchId:"<launchId>",items:[{itemId:"<itemId>",responseId:"<ResponseId>",maxScore:"<item-max-score>",gotScore:"<got-score>",status:"NotAttempted | InProgress | Submitted"}]}},t.prototype.retry=function(t){try{if(this.itemPlayer.clearFeedback(),t)t();else{var e={launchId:this.launchId,type:r.EVENTS.RETRY};this.eventMgr.emit(r.EVENTS.RETRY,new o.EventArgs(e))}}catch(t){this.errorHandler(this.launchId,t)}},t.prototype.reset=function(){try{this.itemPlayer.reset();var t={launchId:this.launchId,type:r.EVENTS.RESET};this.eventMgr.emit(r.EVENTS.RESET,new o.EventArgs(t))}catch(t){this.errorHandler(this.launchId,t)}},t.prototype.showHints=function(){return this.itemPlayer.displayHints(),-1},t.prototype.hideHints=function(){},t.prototype.hasHints=function(){return!0},t.prototype.remainingHints=function(){return 1},t.prototype.subscribe=function(t,e){},t.prototype.unsubscribe=function(t,e){},t.prototype.destroy=function(){try{this.itemPlayer.destroy()}catch(t){this.errorHandler(this.launchId,t)}},t.prototype.focalise=function(){try{this.itemPlayer.focalise()}catch(t){this.errorHandler(this.launchId,t)}},t.prototype.hide=function(){},t.prototype.show=function(){},t.prototype.getState=function(t){return this.itemPlayer.getState(t)},t.prototype.setState=function(t){this.itemPlayer.setState(t)},t.prototype.onChangeHandler=function(t){var e={launchId:this.launchId,type:r.EVENTS.CHANGE,itemId:t.uid,itemPayload:t};this.eventMgr.emit(r.EVENTS.CHANGE,new o.ChangeEventArgs(e))},t.prototype.errorHandler=function(t,e){var n={launchId:t,type:r.EVENTS.ERROR,exception:e};this.eventMgr.emit(r.EVENTS.ERROR,new o.ErrorEventArgs(n))},t}();e.ItemApp=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(10),a=n(3),c=n(4);n(11),n(12);var u=n(13),l=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultButtonsArray=c.checkMyWorkBtn.concat(c.resetBtn),n.hiddenButtons=[a.ButtonBarIcons.tryAgain],n.state={isTryAgainEnabled:!1,isHintsAvailable:!1},n._item=n.props.getItems()[0],n}return r(e,t),e.prototype.render=function(t,e){var n,o,r="activity-player-container",a=t.options&&t.options.playerConfig;a&&(a.uiStyles&&(n=a.uiStyles),o=a.buttons);var c=!o||null==o.visible||o.visible;return c||(r+=" without-button-bar"),n&&n.dimensions&&"content-dim"==n.dimensions&&(r+=" ap-content-dim"),i.h("div",{class:r,style:this.getUiStyles(n)},i.h(s.ItemPlayerComponent,{uiStyles:n,isButtonBarVisible:c,eventMgr:t.eventMgr,launchId:t.launchId,item:this._item,renderItemFuncProp:t.renderItemFuncProp,setState:this.setState.bind(this)}),c&&i.h(u.ButtonBarComponent,{item:this._item,eventMgr:t.eventMgr,launchId:t.launchId}))},e.prototype.getUiStyles=function(t){var e="";if(t){var n=["border","box-shadow"],o=t;for(var r in o)n.indexOf(r)>=0&&(e+=r+":"+o[r]+";")}return e},e}(i.Component);e.SingleItemActivityComponent=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(2),a=n(1),c=function(t){function e(e){var n=t.call(this,e)||this;return n.eventMgr=n.props.eventMgr,n}return r(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.uiStyles;this.props.renderItemFuncProp(0,this.base).then((function(n){t._item=n;var o={launchId:t.props.launchId,type:s.EVENTS.RENDER};t.eventMgr&&t.eventMgr.emit(s.EVENTS.RENDER,new a.EventArgs(o)),e&&e.dimensions&&"content-dim"==e.dimensions&&(t.base.style.display="inline-block"),t.base.classList.remove("item-loader"),setTimeout((function(){t._item.focalise()}),100)}))},e.prototype.render=function(t){var e="item-player-container item-loader",n=t.uiStyles;return n&&n.dimensions&&"content-dim"==n.dimensions&&(e+=" ip-content-dim"),i.h("div",{class:e})},e}(i.Component);e.ItemPlayerComponent=c},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(14),a=n(3),c=n(4),u=n(2),l=n(1),p=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultButtonsArray=c.checkMyWorkBtn.concat(c.resetBtn),n.state={isTryAgainEnabled:!1},n._item=n.props.item,n.eventMgr=n.props.eventMgr,n.launchId=n.props.launchId,n}return r(e,t),e.prototype.createButtonJSX=function(t){return i.h(s.ButtonComponent,{id:t.id,leftIcon:t.icon?t.icon.iconCls_left:null,rightIcon:t.icon?t.icon.iconCls_right:null,label:t.text,tooltip:t.tooltip,onButtonClick:this.onClick.bind(this)})},e.prototype.createButtons=function(){var t=this,e=this.state.isTryAgainEnabled?a.ButtonBarIcons.checkMyWork:a.ButtonBarIcons.tryAgain,n=[],o=e.length>0?this.removeHiddenButtons(e):this.defaultButtonsArray;return o.map((function(e,r){n.push(t.createButtonJSX(e),r<o.length-1?i.h("div",{class:"vertical-seperator"}):null)})),n},e.prototype.onClick=function(t){var e=this,n=t.currentTarget.getAttribute("id");switch(a.ButtonBarIcons[n]){case a.ButtonBarIcons.checkMyWork:this._item.submit((function(t){if(t){var n={launchId:e.launchId,type:u.EVENTS.CHECK_ANSWER,itemId:e._item.leonardoId,response:t};e.eventMgr.emit(u.EVENTS.CHECK_ANSWER,new l.SubmitEventArgs(n))}e.setState({isTryAgainEnabled:!0})}),"");break;case a.ButtonBarIcons.reset:this._item.reset(),this.setState({isTryAgainEnabled:!1});break;case a.ButtonBarIcons.tryAgain:this._item.retry((function(t){if(t){var n={launchId:e.launchId,type:u.EVENTS.RETRY};e.eventMgr.emit(u.EVENTS.RETRY,new l.EventArgs(n))}e.setState({isTryAgainEnabled:!1})}));break;case a.ButtonBarIcons.showHint:case a.ButtonBarIcons.closeHint:}},e.prototype.removeHiddenButtons=function(t){return this.defaultButtonsArray.filter((function(e){return-1==t.indexOf(e.id)}))},e.prototype.render=function(){return i.h("div",{class:"buttons-container"},this.createButtons())},e}(i.Component);e.ButtonBarComponent=p},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);n(15);var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(t,e){return i.h("div",{id:t.id,class:"default-btn "+t.leftIcon,title:t.tooltip,onClick:function(e){return t.onButtonClick(e)}},i.h("span",{class:"default-btn-label"}," ",t.label," "),t.rightIcon&&i.h("span",{class:t.rightIcon}))},e}(i.Component);e.ButtonComponent=s},function(t,e,n){}]).default}));
//# sourceMappingURL=singleItemActivityPlayer.js.map